---
title: تست Gnome روی اوبونتو و زنده کردن دوباره سیستم
date: 2017-02-09T02:42:21+00:00
layout: single
author_profile: true
url: '2017/02/09/تست-gnome-روی-اوبونتو-و-زنده-کردن-دوباره-سیس'
shortlink: https://g.omid.dev/2lpxHKq
lang: fa
category: techblog
---
## داستان خرابکاری

چند روز پیش آخرای ساعت کاری یهو دلم خواست یکم شکل و شمایل اوبونتوم رو عوض کنم و یه چیز متفاوت تر تجربه کنم.

میدونستم KDE اوضاع خیلی خوبی نداره و تصمیم گرفتم یکم با Gnome 3 سر و کله بزنم ببینم حالش چطوره، فکر کردم شاید جذاب تر از Unity باشه.

راحت ترین راه برای استفاده از Gnome روی اوبونتو (بدون نصب دوباره OS) نصب ubuntu-gnome-desktop هستش:

```bash
sudo apt-get install ubuntu-gnome-desktop
```

در حین نصب، ازم راجع به display manager پیش فرض سوال کرد که من چون میخواستم با Gnome کار کنم، gdm رو انتخاب کردم:

![Choose Display Manager](/images/2017/02/uj0A9.png)

فرق این ۲ تا رو توی این عکس متوجه میشین: (سمت راست gdm و سمت چپ lightdm)

![Lightdm vs gdm](/images/2017/02/LaCqz.jpg)

بعد چند دقیقه پکیج ها نصب شد و سیستم رو ری استارت کردم تا تغییرات رو ببینم.

صفحه بوت عوض شده بود و بد نبود، صبر کردم تا سیستم اومد بالا، چند دقیقه با سیستم کار کردم و کاملا مطمین شدم این سیستمی نبود که دنبالش بودم، هیچ شباهتی به سیستمی که دنبالش بودم نداشت. پس توی یه حرکت انتحاری زدم پاکش کردم!

```bash
sudo apt-get remove ubuntu-gnome-desktop

```

اولین اشتباهم همینجا بود&#8230; قبل از حذف باید اول display manager رو به lightdm برمیگردوندم که نکردم این کار رو، بسته رو حذف کردم و سیستم رو ری استارت کردم&#8230;

سیستم بالا نمیومد! کلی کار داشتم توی سیستم که بک آپ نداشت و سیستم بالا نمیومد&#8230; باید کشف میکردم مشکل کجاست، Alt + F1 رو موقع بوت زدم که ببینم چه خبره&#8230; بله! gdm service موقع بوت اررور میداد&#8230;

خب، سیستمی که بالا نمیاد رو چجوری میشه درست کرد؟ باید راه نجاتی باشه!

## زنده کردن دوباره اوبونتو با Recovery Mode

وقتی دیدم سیستم دیگه بالا نمیاد، فهمیدم باید از شر این gdm service موقع بوت خلاص شد. لحظه اول بوت اوبونتو یک بار Esc رو زدم تا بوت منو اوبونتو بیاد و Ubuntu Recover Mode رو انتخاب کردم.

توی Recovery Mode گزینه &#8220;Drop to root shell prompt&#8221; رو انتخاب کردم و برام یه Shell با root permission باز کرد، اما یه مشکل بزرگ! توی Recovery Mode همه دسترسی ها Read Only هست، چجوری از اینجا gdm service رو حذف کنم؟

### دسترسی Read و Write در Recovery Mode

یه راه حلی برای دسترسی خوندن و نوشتن توی Recovery Mode وجود داره و اون یک بار mount و unmount کردن درایوه

```bash
mount -o rw,remount /
```

به همین راحتی مشکل خوندن و نوشتن حل شد، پس حالا میتونیم default Display Manager رو عوض کنیم:

```bash
dpkg-reconfigure lightdm
```

از اینجا میتونین Display Manager رو به lightdm بر گردونین. حالا ری استارت کنین و سیستم میاد بالا

### پاک کردن سایر اضافات باقی مونده از Gnome

بعد از پاک کردن پکیج Gnome-desktop بازم یه سری پکیج های اضافی از gnome باقی میمونه که باید پاک بشن تا سیستم دوباره عادی بشه، مثلا بوت اسکرین همچنان gnome logo باقی میمونه:

```shell
sudo apt-get remove plymouth-theme-gnome-ubuntu-logo
```

و بقیه session ها:

```bash
sudo apt-get remove gnome-session-wayland
```

آخر سر هم یه clean up کلی:

```bash
sudo apt-get autoremove
```

الان باید بیشتر اضافات حذف شده باشه و حال سیستم بهتر باشه.

اگه سوالی داشتین توی کامنت ها بپرسین.
